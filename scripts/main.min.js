$(document).ready((function(){$(".js-menu-dropdown").on("mouseover",(function(){$(".js-menu-dropdown").removeClass("active"),$(".header__dropdown").removeClass("show");let e=$(this).attr("data-dropdown-id"),t=$("#"+e);$(this).addClass("active"),t.addClass("show"),$(this).on("mouseout",(function(){let s=$(this);t.is(":hover")||($(this).removeClass("active"),$("#"+e).removeClass("show")),t.on("mouseleave",(function(){s.removeClass("active"),$(this).removeClass("show")}))}))}));let e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);let t=e.offsetWidth-e.clientWidth;e.remove();let s=(e,s,o=$("body"),n=!0)=>{o.append('<div class="clickable-bg"></div>'),n&&$("body").addClass("modal-opened").css("padding-right",t),e&&$(".clickable-bg").addClass("clickable-bg--dark").fadeOut(1).fadeIn(400),$(".clickable-bg").on("click",(function(){$(this).remove(),s&&(s.removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0))}))};$(document).on("click",".js-open-modal",(function(e){e.preventDefault();let o=$(this).attr("data-modal");$("#"+o).addClass("opened").fadeOut(1).fadeIn(400),$("body").addClass("modal-opened").css("padding-right",t),s(!0,$("#"+o),$("#"+o))})),$(document).on("show",".js-modal-custom",(function(e){e.preventDefault();let o=$(this).attr("id");$("#"+o).addClass("opened").fadeOut(1).fadeIn(400),$("body").addClass("modal-opened").css("padding-right",t),s(!0,$("#"+o),$("#"+o))})),$(document).on("click",".js-close-modal",(function(){let e=$(this).parents(".modal");e.removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0),e.find(".clickable-bg").remove()})),$(".js-open-mob-menu").on("click",(function(){$(".mobile-menu").addClass("opened"),s(!0,$(".mobile-menu"))})),$(".js-close-mobile-menu").on("click",(function(){$(".clickable-bg").remove(),$(".mobile-menu").removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0)})),$(".js-open-dropdown").on("click",(function(){$(this).find($(".mobile-menu__nav-dropdown")).addClass("active"),$(".mobile-menu__top").addClass("show-back"),$(".mobile-menu").addClass("dd-opened")})),$(".js-mob-back").on("click",(function(){$(".mobile-menu__nav-dropdown.active").removeClass("active"),$(".mobile-menu__top").removeClass("show-back"),$(".mobile-menu").removeClass("dd-opened")})),$(document).on("click",".js-filter-dropdown",(function(){$(this).toggleClass("active"),$(this).parent().find(".js-filter-dropdown-box").slideToggle("300")}));new Swiper(".js-main-slider",{loop:!0,lazy:!0,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},pagination:{el:".slider-pagination",clickable:!0}});let o=e=>{let t=e.find(".swiper-slide-visible");e.find(".swiper-slide").removeClass("semi-transparent"),t.eq(0).addClass("semi-transparent"),t.eq(0).prev().addClass("semi-transparent"),t.eq(-1).addClass("semi-transparent"),t.eq(-1).next().addClass("semi-transparent")};function n(){$(".js-cart-slider").each((function(){new Swiper($(this)[0],{lazy:!0,spaceBetween:0,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{767:{spaceBetween:15}}})}))}[".js-best-sell-slider",".js-hit-slider",".js-category-slider",".js-you-will-like-slider",".js-buy-also-slider"].forEach(e=>{(e=>{const t=new Swiper(e,{loop:!0,lazy:!0,centeredSlides:!1,slidesPerView:2,spaceBetween:20,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},watchSlidesProgress:!0,watchSlidesVisibility:!0,watchOverflow:!0,breakpoints:{767:{centeredSlides:!0,slidesPerView:"auto",spaceBetween:0}},on:{init:function(){if(screen.width>991){let t=$(e).find(".swiper-slide-visible");t.eq(0).addClass("semi-transparent"),t.eq(0).prev().addClass("semi-transparent"),t.eq(-1).addClass("semi-transparent"),t.eq(-1).next().addClass("semi-transparent")}}}});screen.width>991&&(t.on("slideChange",(function(){o($(e))})),t.on("touchEnd",(function(){o($(e))})))})(e)}),$(".js-inner-slider").each((function(){new Swiper($(this)[0],{lazy:!0,pagination:{el:".slider-pagination",clickable:!0}})})),n(),$(document).on("update-cart",(function(){n()}));const i=new Swiper(".js-product-thumb-slider",{lazy:!0,slidesPerView:"auto",watchSlidesVisibility:!0,watchSlidesProgress:!0,spaceBetween:10,breakpoints:{767:{slidesPerView:5,direction:"vertical"}}}),a=(new Swiper(".js-product-main-slider",{lazy:!0,slidesPerView:1,thumbs:{swiper:i}}),new Swiper(".js-testimonials-slider",{spaceBetween:10,lazy:!0,slidesPerView:1,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{600:{spaceBetween:30},767:{spaceBetween:140}}}),new Swiper(".js-news-slider",{spaceBetween:60,lazy:!0,slidesPerView:"1",navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{1199:{slidesPerView:"2"}}}),document.querySelectorAll("input[type='tel']")),l={mask:"+{0}(000)000-00-00"};a.forEach(e=>{IMask(e,l)});screen.width<=600&&$(".product-filter__sortby-title").addClass("js-open-popup");let c=e=>{e.removeClass("opened"),$(".clickable-bg").remove()};$(document).on("click",".js-radio",(function(){$(this).parent().find(".js-radio").removeClass("choosen"),$(this).addClass("choosen"),$(this).find(".custom-radio").prop("checked",!0).change()})),$(document).on("click",".js-filter-radio",(function(){$(this).parent().find(".js-filter-radio").removeClass("choosen"),$(this).addClass("choosen"),$(this).find(".custom-radio").prop("checked",!0),screen.width>600?c($(this).parents(".js-popup")):$(".mobile-filters__chosen-filters").find(".js-filter-item.product-filter__item--type").remove()})),$(document).on("click",".js-checkbox",(function(){$(this).toggleClass("checked").find(".custom-cb-badge").toggleClass("checked");let e=$(this).find(".custom-checkbox").prop("checked");$(this).find(".custom-checkbox").prop("checked",!e),$(this).find(".custom-checkbox").attr("checked",!e)})),$(document).on("click",".js-filter-checkbox",(function(){$(this).toggleClass("checked").find(".custom-cb-badge").toggleClass("checked");let e=$(this).find(".custom-checkbox").prop("checked"),t=!0;if($(this).find(".custom-checkbox").prop("checked",!e),screen.width<=600){let e=$(this).find(".custom-checkbox__label").text();$(".mobile-filters__chosen-filters .product-filter__item span").each((function(){$(this).text()===e&&($(this).parents(".js-filter-item").remove(),t=!1)}))}})),$(document).on("click",".js-popup-apply",(function(e){e.preventDefault(),$(this).parents(".js-popup").find(".js-filter-checkbox").each((function(){$(this).hasClass("checked")})),c($(this).parents(".js-popup"))})),$(document).on("click",".js-sort-item",(function(){$(this).parents(".product-filter__sortby").find(".js-sort-text").text($(this).text()),c($(this).parents(".js-popup"))})),$(document).on("click",".js-custom-select .custom-select-option",(function(){let e=$(this).text(),t=$(this).parents(".js-custom-select");t.find(".custom-select__value").text(e),setTimeout((function(){$(".clickable-bg").remove()}),50),t.find("option").each((function(){$(this).text()===e&&t.find("select").val($(this).attr("value")).change()}))})),$(document).on("click",".js-qnty-minus",(function(){let e=$(this).siblings(".js-qnty-num");e.val()>=2&&e.val(Number(e.val())-1).change()})),$(document).on("click",".js-qnty-plus",(function(){let e=$(this).siblings(".js-qnty-num");e.val(Number(e.val())+1).change()})),$(".datepicker-wrapper").length>0&&$("#account-birth-date").datepicker({autoClose:!0});let d=[{id:"modal-map-container",mapWithForm:!0},{id:"page-map-container",mapWithForm:!1}];function r(){d.forEach(e=>{$("#"+e.id).length>0&&function(e,t){let s=$(".js-shops").attr("data-json"),o=[],n=0;$.getJSON(s,(function(s){s.forEach(e=>{let s=document.createElement("div"),a=[0,0];s.className=`shops__city ${0===n?"opened":""} js-slide-down`,s.innerText=`${e.city} ${e.shops.length}`,s.addEventListener("click",(function(){$(this).next(".js-slide-down-wrapper").slideToggle(),$(this).toggleClass("opened")}));let l=document.createElement("div");l.className=`shops__cities-box ${0===n?"opened":""} js-slide-down-wrapper`,e.shops.forEach(e=>{let s=null;t?(s=document.createElement("div"),s.className="form-group form-group--radio js-radio",s.innerHTML=`\n                            <label class="custom-radio__label" for="modal-radio[${n}]">${e.name}</label>\n                            <input class="custom-radio js-shop-input" type="radio" name="form-group-radio" value="${e.id}" id="modal-radio[${n}]">`,s.addEventListener("click",(function(){this.closest(".shops__list").querySelectorAll(".js-radio").forEach((function(e){e.classList.remove("choosen")})),this.classList.add("choosen"),this.querySelector(".custom-radio").checked=!0,$(this).find(".js-shop-input").trigger("change")})),l.append(s)):(s=document.createElement("div"),s.className="shops__item",s.innerHTML=`\n                                <div class="shops__item-inner shops__item-address">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="/img/svg/sprite.svg#marker"></use>\n                                    </svg>\n                                    ${e.address}\n                                </div>\n                                <div class="shops__item-inner shops__item-worktime">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="/img/svg/sprite.svg#clock"></use>\n                                    </svg>\n                                    Режим работы ${e.worktime}\n                                </div>\n                                <a href="tel:${e.phone}" class=" shops__item-inner shops__item-phone">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="/img/svg/sprite.svg#phone2"></use>\n                                    </svg>\n                                    ${e.phone}\n                                </a>`,l.append(s)),n++;let c=`<div class="custom-balloon">\n                                    <div class="custom-balloon__bg"></div>\n                                    <div class="custom-balloon__text"><b>${e.name}</b></div>\n                                    <div class="custom-balloon__text">${e.address}</div>\n                                    <div class="custom-balloon__text">Режим работы ${e.worktime}</div>\n                             </div>`,d=new ymaps.Placemark(e.coords,{balloonContent:c},{hideIconOnBalloonOpen:!1,balloonOffset:[4,-37],iconLayout:"default#image",iconImageHref:"img/svg/marker.svg"});o.push(d),s.addEventListener("click",(function(){if(i.setCenter(e.coords,17),d.balloon.isOpen()?d.balloon.close():d.balloon.open(),screen.width<991){let e;e=$("#modal-map").length>0?".modal__box":[document.documentElement,document.body],$(e).animate({scrollTop:$(".shops__map-container").offset().top-50},700)}})),a[0]+=Number(e.coords[0]),a[1]+=Number(e.coords[1])});let c=e.shops.length,d=[a[0]/c,a[1]/c];document.querySelector(".shops__list").append(s),document.querySelector(".shops__list").append(l);let r=document.createElement("div");r.className="common-btn-simple",r.innerText="Все магазины г. "+e.city,r.addEventListener("click",(function(){i.setCenter(d,13)})),l.append(r)});var i=new ymaps.Map(e,{center:s[0].shops[0].coords,zoom:13,controls:["zoomControl"]});o.forEach(e=>{i.geoObjects.add(e)}),i.behaviors.disable("scrollZoom")}))}(e.id,e.mapWithForm)})}let p=!1;const m=()=>{var e,t,s;p||(p=!0,e="https://api-maps.yandex.ru/2.1/?apikey=04709a29-6f21-442a-9cb5-272b39900456&lang=ru_RU",t=function(){ymaps.ready(r)},(s=document.createElement("script")).readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,t())}:s.onload=function(){t()},s.src=e,document.getElementsByTagName("head")[0].appendChild(s))};$(".map-container").length>0&&m(),$(".js-toggle-active").on("click",(function(){$(this).toggleClass("active")}));let u=(e,t,s,o=!0)=>{screen.width<s&&(o?$(e).appendTo(t):$(e).prependTo(t))};u(".optics-block__title",".optics-block__inner",768,!1),u(".optics-block__btn",".optics-block .container",768),u(".product-filter__sortby",".product-filter__mobile-wrapper",991),u(".product-filter__sortby .product-filter__popup",".product-filter__sortby",600),u(".product-filter__popup--type .form-group",".mobile-filters__dropdown--type",600),u(".product-filter__popup--material .form-group",".mobile-filters__dropdown--material",600),u(".product-filter__popup--color .form-group",".mobile-filters__dropdown--color",600),u(".product-filter__popup--price .form-group",".mobile-filters__dropdown--price",600),$(document).on("click",".js-open-popup",(function(){$(".js-open-popup").removeClass("opened");let e=$(this).parent().find(".js-popup");e.toggleClass("opened"),s(!1,e,$("body"),!1)})),screen.width<=600&&$(".js-footer-dropdown").on("click",(function(){let e=$(this).next(".footer__nav--mobile-folded");$(this).next(".footer__nav--mobile-folded").slideToggle({start:function(){$(this).css("display","block")}}).toggleClass("opened"),e.css("display","block"),$(this).toggleClass("opened")})),$(".js-tab-toggle").on("click",(function(){$(".js-tab-toggle").removeClass("active"),$(this).addClass("active"),$(".js-tab").removeClass("active"),$("#"+$(this).attr("data-tabs")).addClass("active")}));let h=e=>{let t=e.attr("data-rating"),s=Math.trunc(t),o=100*(t-s);e.find(".star").each((function(e){$(this).find(".star__icon--active").css("width","0"),e<s?$(this).find(".star__icon--active").css("width","100%"):e==s&&$(this).find(".star__icon--active").css("width",o+"%")}))};$(".js-stars").each((function(){h($(this))})),$(".js-to-cart").on("click",(function(){$(this).addClass("pushed").attr("href","#").off(),$(this).find("span").text("Перейти в корзину")})),$(".js-clickable-star").on("click",(function(){$(this).parents(".js-stars").attr("data-rating",$(this).index()+1),$(this).parents(".js-stars").find(".js-input-stars").val($(this).index()+1),h($(this).parents(".js-stars"))})),$(".js-cart-delete").on("click",(function(){let e=$(this).parents(".cart-items__item");e.toggleClass("pre-deleted"),$(this).find(".cart-items__item-delete-icon").toggleClass("hidden"),$(this).find("span").text(e.hasClass("pre-deleted")?"Вернуть":"Удалить")})),$(".js-slide-down").on("click",(function(){$(this).next(".js-slide-down-wrapper").slideToggle(),$(this).toggleClass("opened")})),$(".js-scroll-to").on("click",(function(){const e="#"+$(this).attr("data-scroll");$([document.documentElement,document.body]).animate({scrollTop:$(e).offset().top},1e3)}))}));
//# sourceMappingURL=main.min.js.map
