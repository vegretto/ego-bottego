$(document).ready((function(){const e={data:["Колье белое с золотом","Колье-галстук","Колье Эстер","Колье Кокетка","Колье Pupa","Колье белое с золотом1","Колье-галстук2","Колье Эстер3","Колье Кокетка4","Колье Pupa5"],list:{maxNumberOfElements:15}};let t=(e,t)=>{e.hasClass("eac-initialized")||(e.addClass("eac-initialized"),e.easyAutocomplete(t))};t($(".js-city-autocomplete"),{data:["Пятигорск","Краснодар","Ростов","Ессентуки","Нью-Йорк"],list:{maxNumberOfElements:15}}),screen.width>991?$(".js-header-search").on("click",(function(){if(!$(this).hasClass("expanded")){const s=$(this).parents(".container").width();$(this).addClass("expanded"),$(this).find("span").addClass("hidden");const i=$(this).find(".header__search-input");i.addClass("visible"),i.css("width","45px"),i.animate({width:s/6}),t($(".js-easy-autocomplete"),e);const o=$(this).find(".easy-autocomplete");o.css("width","45px"),o.animate({width:s/6}),i.focus()}})):($(".js-header-search").addClass("js-open-modal js-init-eac").attr("data-modal","modal-mobile-search"),$(".js-init-eac").on("click",(function(){setTimeout(()=>{t($(".js-easy-autocomplete-modal"),e)},402)}))),$(".js-menu-dropdown").on("mouseover",(function(){$(".js-menu-dropdown").removeClass("active"),$(".header__dropdown").removeClass("show");let e=$(this).attr("data-dropdown-id"),t=$("#"+e);$(this).addClass("active"),t.addClass("show"),$(this).on("mouseout",(function(){let s=$(this);t.is(":hover")||($(this).removeClass("active"),$("#"+e).removeClass("show")),t.on("mouseleave",(function(){s.removeClass("active"),$(this).removeClass("show")}))}))}));let s=document.createElement("div");s.style.overflowY="scroll",s.style.width="50px",s.style.height="50px",document.body.append(s);let i=s.offsetWidth-s.clientWidth;s.remove();let o=(e,t,s=$("body"),o=!0)=>{s.append('<div class="clickable-bg"></div>'),o&&$("body").addClass("modal-opened").css("padding-right",i),e&&$(".clickable-bg").addClass("clickable-bg--dark").fadeOut(1).fadeIn(400),$(".clickable-bg").on("click",(function(){$(this).remove(),t&&(t.removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0))}))};$(".js-open-modal").on("click",(function(e){e.preventDefault();let t=$(this).attr("data-modal");$("#"+t).addClass("opened").fadeOut(1).fadeIn(400),$("body").addClass("modal-opened").css("padding-right",i),o(!0,$("#"+t),$("#"+t))})),$(".js-close-modal").on("click",(function(){let e=$(this).parents(".modal");e.removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0),e.find(".clickable-bg").remove()})),$(".js-open-mob-menu").on("click",(function(){$(".mobile-menu").addClass("opened"),o(!0,$(".mobile-menu"))})),$(".js-close-mobile-menu").on("click",(function(){$(".clickable-bg").remove(),$(".mobile-menu").removeClass("opened"),$("body").removeClass("modal-opened").css("padding-right",0)})),$(".js-open-dropdown").on("click",(function(){$(this).find($(".mobile-menu__nav-dropdown")).addClass("active"),$(".mobile-menu__top").addClass("show-back"),$(".mobile-menu").addClass("dd-opened")})),$(".js-mob-back").on("click",(function(){$(".mobile-menu__nav-dropdown.active").removeClass("active"),$(".mobile-menu__top").removeClass("show-back"),$(".mobile-menu").removeClass("dd-opened")})),$(".js-filter-dropdown").on("click",(function(){$(this).toggleClass("active"),$(this).parent().find(".js-filter-dropdown-box").slideToggle("300")}));new Swiper(".js-main-slider",{loop:!0,lazy:!0,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},pagination:{el:".slider-pagination",clickable:!0}});let n=e=>{let t=e.find(".swiper-slide-visible");e.find(".swiper-slide").removeClass("semi-transparent"),t.eq(0).addClass("semi-transparent"),t.eq(0).prev().addClass("semi-transparent"),t.eq(-1).addClass("semi-transparent"),t.eq(-1).next().addClass("semi-transparent")};[".js-best-sell-slider",".js-hit-slider",".js-category-slider",".js-you-will-like-slider",".js-buy-also-slider"].forEach(e=>{(e=>{const t=new Swiper(e,{loop:!0,lazy:!0,centeredSlides:!1,slidesPerView:2,spaceBetween:20,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},watchSlidesProgress:!0,watchSlidesVisibility:!0,watchOverflow:!0,breakpoints:{767:{centeredSlides:!0,slidesPerView:"auto",spaceBetween:0}},on:{init:function(){if(screen.width>991){let t=$(e).find(".swiper-slide-visible");t.eq(0).addClass("semi-transparent"),t.eq(0).prev().addClass("semi-transparent"),t.eq(-1).addClass("semi-transparent"),t.eq(-1).next().addClass("semi-transparent")}}}});screen.width>991&&(t.on("slideChange",(function(){n($(e))})),t.on("touchEnd",(function(){n($(e))})))})(e)}),$(".js-inner-slider").each((function(){new Swiper($(this)[0],{lazy:!0,pagination:{el:".slider-pagination",clickable:!0}})})),$(".js-cart-slider").each((function(){new Swiper($(this)[0],{lazy:!0,spaceBetween:0,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{767:{spaceBetween:15}}})}));const a=new Swiper(".js-product-thumb-slider",{lazy:!0,slidesPerView:"auto",watchSlidesVisibility:!0,watchSlidesProgress:!0,spaceBetween:10,breakpoints:{767:{slidesPerView:5,direction:"vertical"}}}),l=(new Swiper(".js-product-main-slider",{lazy:!0,slidesPerView:1,thumbs:{swiper:a}}),new Swiper(".js-testimonials-slider",{spaceBetween:10,lazy:!0,slidesPerView:1,navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{600:{spaceBetween:30},767:{spaceBetween:140}}}),new Swiper(".js-news-slider",{spaceBetween:60,lazy:!0,slidesPerView:"1",navigation:{nextEl:".slider-button--next",prevEl:".slider-button--prev"},breakpoints:{1199:{slidesPerView:"2"}}}),document.querySelectorAll("input[type='tel']")),c={mask:"+{0}(000)000-00-00"};l.forEach(e=>{IMask(e,c)});let r=(e,t)=>{if(screen.width<=600){if(e.hasClass("product-filter__item--type")){let e=$(".mobile-filters__dropdown--type").find(".form-group.choosen");e.removeClass("choosen"),e.find(".custom-radio").prop("checked",!1)}$(".mobile-filters__dropdown").find(".custom-checkbox__label").each((function(){$(this).text()===t&&($(this).parents(".form-group").removeClass("checked"),$(this).parents(".form-group").find(".js-custom-cb").removeClass("checked"),$(this).parents(".form-group").find(".custom-radio").prop("checked",!1))}))}e.remove()},d=(e,t,s="")=>{let i=$("<div/>",{class:"product-filter__item js-filter-item "+s});i.html(`<span>${e}</span>\n                <div class="product-filter__item-bg product-filter__item-bg--red">\n                    <picture>\n                        <source data-srcset="img/prod-filter-bg-red.webp" type="image/webp" srcset="img/prod-filter-bg-red.webp">\n                        <img class=" lazyloaded" data-src="img/prod-filter-bg-red.png" alt="image" width="107" height="31" src="img/prod-filter-bg-red.png">\n                    </picture>\n                </div>`),i.on("click",(function(){r(i,e)})),t.append(i)};screen.width<=600&&$(".product-filter__sortby-title").addClass("js-open-popup");let p=e=>{e.removeClass("opened"),$(".clickable-bg").remove()};$(".js-radio").on("click",(function(){$(this).parent().find(".js-radio").removeClass("choosen"),$(this).addClass("choosen"),$(this).find(".custom-radio").prop("checked",!0)})),$(".js-filter-radio").on("click",(function(){$(this).parent().find(".js-filter-radio").removeClass("choosen"),$(this).addClass("choosen"),$(this).find(".custom-radio").prop("checked",!0),screen.width>600?($(this).parents(".product-filter__items-box").find(".js-filter-item").remove(),d($(this).find(".custom-radio__label").text(),$(this).parents(".product-filter__items-box")),p($(this).parents(".js-popup"))):($(".mobile-filters__chosen-filters").find(".js-filter-item.product-filter__item--type").remove(),d($(this).find(".custom-radio__label").text(),$(".mobile-filters__chosen-filters"),"product-filter__item--type"))})),$(".js-checkbox").on("click",(function(){$(this).toggleClass("checked").find(".custom-cb-badge").toggleClass("checked"),$(this).find(".custom-checkbox").prop("checked",!isChecked)})),$(".js-filter-checkbox").on("click",(function(){$(this).toggleClass("checked").find(".custom-cb-badge").toggleClass("checked");let e=$(this).find(".custom-checkbox").prop("checked"),t=!0;if($(this).find(".custom-checkbox").prop("checked",!e),screen.width<=600){let e=$(this).find(".custom-checkbox__label").text();$(".mobile-filters__chosen-filters .product-filter__item span").each((function(){$(this).text()===e&&($(this).parents(".js-filter-item").remove(),t=!1)})),t&&d(e,$(".mobile-filters__chosen-filters"))}})),$(".js-popup-apply").on("click",(function(e){e.preventDefault(),$(this).parents(".product-filter__items-box").find(".js-filter-item").remove(),$(this).parents(".js-popup").find(".js-filter-checkbox").each((function(){$(this).hasClass("checked")&&d($(this).find(".custom-checkbox__label").text(),$(this).parents(".product-filter__items-box"))})),p($(this).parents(".js-popup"))})),$(".js-sort-item").on("click",(function(){$(this).parents(".product-filter__sortby").find(".js-sort-text").text($(this).text()),p($(this).parents(".js-popup"))})),$(".js-clear-filter").on("click",(function(){$(".product-filter__item").remove(),$(".form-group").removeClass("checked"),$(".js-custom-cb").removeClass("checked"),$(".js-radio").removeClass("choosen"),$(".product-filter__item input").prop("checked",!1)})),$(".js-filter-item").on("click",(function(){r($(this),$(this).find("span").text())})),$(".js-custom-select .custom-select-option").on("click",(function(){let e=$(this).text(),t=$(this).parents(".js-custom-select");t.find(".custom-select__value").text(e),setTimeout((function(){$(".clickable-bg").remove()}),50),t.find("option").each((function(){$(this).text()===e&&t.find("select").val(e).change()}))})),$(".js-qnty-minus").on("click",(function(){let e=$(this).siblings(".js-qnty-num");e.val()>=2&&e.val(Number(e.val())-1)})),$(".js-qnty-plus").on("click",(function(){let e=$(this).siblings(".js-qnty-num");e.val(Number(e.val())+1)})),$(".datepicker-wrapper").length>0&&$("#account-birth-date").datepicker({autoClose:!0});let m=[{id:"modal-map-container",mapWithForm:!0},{id:"page-map-container",mapWithForm:!1}];function h(){m.forEach(e=>{$("#"+e.id).length>0&&function(e,t){let s=$(".js-shops").attr("data-json"),i=[],o=0;$.getJSON(s,(function(s){s.forEach(e=>{let s=document.createElement("div"),a=[0,0];s.className=`shops__city ${0===o?"opened":""} js-slide-down`,s.innerText=`${e.city} ${e.shops.length}`,s.addEventListener("click",(function(){$(this).next(".js-slide-down-wrapper").slideToggle(),$(this).toggleClass("opened")}));let l=document.createElement("div");l.className=`shops__cities-box ${0===o?"opened":""} js-slide-down-wrapper`,e.shops.forEach(e=>{let s=null;t?(s=document.createElement("div"),s.className="form-group form-group--radio js-radio",s.innerHTML=`\n                            <label class="custom-radio__label" for="modal-radio[${o}]">${e.name}</label>\n                            <input class="custom-radio" type="radio" name="form-group-radio" id="modal-radio[${o}]">`,s.addEventListener("click",(function(){this.closest(".shops__list").querySelectorAll(".js-radio").forEach((function(e){e.classList.remove("choosen")})),this.classList.add("choosen"),this.querySelector(".custom-radio").checked=!0})),l.append(s)):(s=document.createElement("div"),s.className="shops__item",s.innerHTML=`\n                                <div class="shops__item-inner shops__item-address">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="img/svg/sprite.svg#marker"></use>\n                                    </svg>\n                                    ${e.address}\n                                </div>\n                                <div class="shops__item-inner shops__item-worktime">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="img/svg/sprite.svg#clock"></use>\n                                    </svg>\n                                    Режим работы ${e.worktime}\n                                </div>\n                                <a href="tel:${e.phone}" class=" shops__item-inner shops__item-phone">\n                                    <svg class="icon icon-marker">\n                                        <use xlink:href="img/svg/sprite.svg#phone2"></use>\n                                    </svg>\n                                    ${e.phone}\n                                </a>`,l.append(s)),o++;let c=`<div class="custom-balloon">\n                                    <div class="custom-balloon__bg"></div>\n                                    <div class="custom-balloon__text"><b>${e.name}</b></div>\n                                    <div class="custom-balloon__text">${e.address}</div>\n                                    <div class="custom-balloon__text">Режим работы ${e.worktime}</div>\n                             </div>`,r=new ymaps.Placemark(e.coords,{balloonContent:c},{hideIconOnBalloonOpen:!1,balloonOffset:[4,-37],iconLayout:"default#image",iconImageHref:"img/svg/marker.svg"});i.push(r),s.addEventListener("click",(function(){if(n.setCenter(e.coords,17),r.balloon.isOpen()?r.balloon.close():r.balloon.open(),screen.width<991){let e;e=$("#modal-map").length>0?".modal__box":[document.documentElement,document.body],$(e).animate({scrollTop:$(".shops__map-container").offset().top-50},700)}})),a[0]+=Number(e.coords[0]),a[1]+=Number(e.coords[1])});let c=e.shops.length,r=[a[0]/c,a[1]/c];document.querySelector(".shops__list").append(s),document.querySelector(".shops__list").append(l);let d=document.createElement("div");d.className="common-btn-simple",d.innerText="Все магазины г. "+e.city,d.addEventListener("click",(function(){n.setCenter(r,13)})),l.append(d)});var n=new ymaps.Map(e,{center:s[0].shops[0].coords,zoom:13,controls:["zoomControl"]});i.forEach(e=>{n.geoObjects.add(e)}),n.behaviors.disable("scrollZoom")}))}(e.id,e.mapWithForm)})}let u=!1;const f=()=>{var e,t,s;u||(u=!0,e="https://api-maps.yandex.ru/2.1/?apikey=04709a29-6f21-442a-9cb5-272b39900456&lang=ru_RU",t=function(){ymaps.ready(h)},(s=document.createElement("script")).readyState?s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||(s.onreadystatechange=null,t())}:s.onload=function(){t()},s.src=e,document.getElementsByTagName("head")[0].appendChild(s))};$(".map-container").length>0&&f(),$(".js-toggle-active").on("click",(function(){$(this).toggleClass("active")}));let b=(e,t,s,i=!0)=>{screen.width<s&&(i?$(e).appendTo(t):$(e).prependTo(t))};b(".optics-block__title",".optics-block__inner",768,!1),b(".optics-block__btn",".optics-block .container",768),b(".product-filter__sortby",".product-filter__mobile-wrapper",991),b(".product-filter__sortby .product-filter__popup",".product-filter__sortby",600),b(".product-filter__popup--type .form-group",".mobile-filters__dropdown--type",600),b(".product-filter__popup--material .form-group",".mobile-filters__dropdown--material",600),b(".product-filter__popup--color .form-group",".mobile-filters__dropdown--color",600),b(".product-filter__popup--price .form-group",".mobile-filters__dropdown--price",600),$(".js-open-popup").on("click",(function(){$(".js-open-popup").removeClass("opened");let e=$(this).parent().find(".js-popup");e.toggleClass("opened"),o(!1,e,$("body"),!1)})),screen.width<=600&&$(".js-footer-dropdown").on("click",(function(){let e=$(this).next(".footer__nav--mobile-folded");$(this).next(".footer__nav--mobile-folded").slideToggle({start:function(){$(this).css("display","block")}}).toggleClass("opened"),e.css("display","block"),$(this).toggleClass("opened")})),$(".js-tab-toggle").on("click",(function(){$(".js-tab-toggle").removeClass("active"),$(this).addClass("active"),$(".js-tab").removeClass("active"),$("#"+$(this).attr("data-tabs")).addClass("active")}));let _=e=>{let t=e.attr("data-rating"),s=Math.trunc(t),i=100*(t-s);e.find(".star").each((function(e){$(this).find(".star__icon--active").css("width","0"),e<s?$(this).find(".star__icon--active").css("width","100%"):e==s&&$(this).find(".star__icon--active").css("width",i+"%")}))};$(".js-stars").each((function(){_($(this))})),$(".js-to-cart").on("click",(function(){$(this).addClass("pushed").attr("href","#").off(),$(this).find("span").text("Перейти в корзину")})),$(".js-clickable-star").on("click",(function(){$(this).parents(".js-stars").attr("data-rating",$(this).index()+1),_($(this).parents(".js-stars"))})),$(".js-cart-delete").on("click",(function(){let e=$(this).parents(".cart-items__item");e.toggleClass("pre-deleted"),$(this).find(".cart-items__item-delete-icon").toggleClass("hidden"),$(this).find("span").text(e.hasClass("pre-deleted")?"Вернуть":"Удалить")})),$(".js-slide-down").on("click",(function(){$(this).next(".js-slide-down-wrapper").slideToggle(),$(this).toggleClass("opened")})),$(".js-scroll-to").on("click",(function(){const e="#"+$(this).attr("data-scroll");$([document.documentElement,document.body]).animate({scrollTop:$(e).offset().top},1e3)}))}));
//# sourceMappingURL=main.min.js.map
